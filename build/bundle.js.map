{"version":3,"sources":["webpack:///webpack/bootstrap 8ecf693f6e3a0ff38a58","webpack:///./src/main.js","webpack:///./src/App.js","webpack:///./src/Grid.js","webpack:///./src/Tile.js","webpack:///./src/Player.js","webpack:///./src/Viewport.js","webpack:///./src/RenderEngine.js","webpack:///./src/Sprite.js"],"names":["main","app","window","addEventListener","onLoad","bind","onResize","ASSETS","SERVER_URL","App","canvas","document","createElement","width","height","spriteSrc","setupEventListeners","grid","player","re","sprite","render","ws","WebSocket","onopen","console","log","send","onmessage","evt","onclose","event","keyCode","move","body","appendChild","setup","BLACK","Grid","size","Array","i","j","Math","random","x","y","rand","symbol","Tile","sym","spriteTextureCoords","traversable","Player","pos","viewport","dir","updateFocus","PLAYER","Viewport","halfWidth","floor","halfHeight","cells","focus","_sampleTiles","getTile","TILEMAP","RenderEngine","ctx","getContext","drawTile","tile","spritePos","tileHeight","tileWidth","canvasTileWidth","canvasTileHeight","canvasPosx","canvasPosy","drawImage","image","Sprite","src","onload","Image","clientWidth","clientHeight"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8ecf693f6e3a0ff38a58","import App from './App';\r\n\r\n\r\n(function main() {\r\n  let app = new App();\r\n  window.addEventListener('load', app.onLoad.bind(app));\r\n  window.addEventListener('resize', app.onResize.bind(app), false);\r\n})();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","import Grid from './Grid.js'\r\nimport Player from './Player.js'\r\nimport RenderEngine from './RenderEngine.js'\r\nimport Sprite from './Sprite.js'\r\n\r\nconst ASSETS = 'assets';\r\nconst SERVER_URL = 'ws://localhost:8000/play';\r\n\r\nexport default class App {\r\n  constructor () {\r\n    this.canvas = document.createElement('canvas');\r\n    // Aspect ratio of 3:2\r\n    // this.canvas.width = 960;\r\n    // this.canvas.height = 640;\r\n    this.canvas.width = 480;\r\n    this.canvas.height = 320;\r\n    this.spriteSrc = `${ASSETS}/sprites.png`;\r\n  }\r\n\r\n  setup() {\r\n    // this.setupWebsocket();\r\n    this.setupEventListeners();\r\n    this.grid = new Grid(100);\r\n    this.player = new Player(this.grid);\r\n    this.re = new RenderEngine(this.canvas, this.sprite, this.grid, this.player);\r\n    this.re.render();\r\n  }\r\n\r\n  setupWebsocket() {\r\n    let ws = new WebSocket(SERVER_URL);\r\n    ws.onopen = () => {\r\n      console.log('websocket connection opened');\r\n      ws.send('ping');\r\n    }\r\n    ws.onmessage = (evt) => {\r\n      console.log(`evt received ${evt}`);\r\n    }\r\n    ws.onclose = () => {\r\n      console.log('websocket connection closed');\r\n    }\r\n  }\r\n\r\n  setupEventListeners() {\r\n    window.addEventListener('keydown', (event) => {\r\n      switch (event.keyCode) {\r\n        case 37:\r\n          this.player.move(\"left\");\r\n          break;\r\n        case 38:\r\n          this.player.move(\"down\");\r\n          break;\r\n        case 39:\r\n          this.player.move(\"right\");\r\n          break;\r\n        case 40:\r\n          this.player.move(\"up\");\r\n          break;\r\n      }\r\n      this.re.render();\r\n    });\r\n  }\r\n\r\n  onLoad() {\r\n    document.body.appendChild(this.canvas);\r\n    this.sprite = new Sprite(this.spriteSrc, () => {\r\n      this.setup();\r\n    });\r\n  }\r\n\r\n  onUpdate() {\r\n  }\r\n\r\n  onResize() {\r\n\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/App.js","import Tile from './Tile.js'\r\n\r\nconst BLACK = new Tile('0');\r\n\r\nexport default class Grid {\r\n  constructor(size) {\r\n  \tthis.size = size;\r\n  \tthis.grid = new Array(this.size);\r\n    for (let i = 0; i < this.size; i++) {\r\n      this.grid[i] = new Array(this.size);\r\n    }\r\n    for (let i = 0; i < this.size; i++) {\r\n      for (let j = 0; j < this.size; j++) {\r\n        if (Math.random() > 0.5) {\r\n          this.grid[i][j] = new Tile('1');\r\n        } else {\r\n          this.grid[i][j] = new Tile('2');\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  getTile(x, y) {\r\n    if (0 <= x && x < this.size && 0 <= y && y < this.size) {\r\n      return this.grid[x][y];\r\n    } else {\r\n      return BLACK;\r\n    }\r\n  }\r\n\r\n  spawnRandomPokemonLocations() {\r\n  \tfor (let i = 0; i < this.size; i++) {\r\n  \t\tfor (let j = 0; j < this.size; j++) {\r\n  \t\t\tlet rand = Math.random();\r\n  \t\t\tif (rand > 0.5) {\r\n  \t\t\t\tthis.grid[i][j].symbol = '1';\r\n  \t\t\t}\r\n  \t\t}\r\n  \t}\r\n  }\r\n\r\n  generateWildPokemonAreas() {\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Grid.js","export default class Tile {\n  constructor(sym) {\n  \tthis.spriteTextureCoords = null;\n  \tthis.symbol = sym;\n  \tthis.traversable = true;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Tile.js","import Viewport from './Viewport.js'\r\n\r\nexport default class Player {\r\n  constructor(grid) {\r\n    this.pos = {x: 10, y: 10};\r\n    this.grid = grid;\r\n    this.viewport = new Viewport(grid, this.pos);\r\n  }\r\n\r\n\r\n  move(dir) {\r\n    switch(dir) {\r\n      case 'right':\r\n        if (this.pos.x + 1 < this.grid.size) {\r\n          this.pos.x += 1;\r\n        }\r\n        break;\r\n      case 'left':\r\n        if (this.pos.x - 1 >= 0) {\r\n          this.pos.x -= 1;\r\n        }\r\n        break;\r\n      case 'up':\r\n        if (this.pos.y + 1 < this.grid.size) {\r\n          this.pos.y += 1;\r\n        }\r\n        break;\r\n      case 'down':\r\n        if (this.pos.y - 1 >= 0) {\r\n          this.pos.y -= 1;\r\n        }\r\n        break;\r\n    }\r\n    this.viewport.updateFocus(this.pos.x, this.pos.y);\n  }\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Player.js","import Tile from './Tile.js'\r\nconst PLAYER = 'P';\r\n\r\nexport default class Viewport {\r\n  constructor(grid, pos) {\r\n    this.width = 15;\r\n    this.height = 11;\r\n    this.halfWidth = Math.floor(this.width / 2);\r\n    this.halfHeight = Math.floor(this.height / 2);\r\n\r\n    this.cells = new Array(this.width);\r\n    for (let i = 0; i < this.width; i++) {\r\n      this.cells[i] = new Array(this.height);\r\n    }\r\n    this.focus = {x: pos.x, y: pos.y};\r\n    this.grid = grid;\r\n    this._sampleTiles();\r\n  }\r\n\r\n  updateFocus(x, y) {\r\n    this.focus.x = x;\r\n    this.focus.y = y;\r\n    this._sampleTiles();\r\n  }\r\n\r\n  _sampleTiles() {\n    for (let i = 0; i < this.width; i++) {\r\n      for (let j = 0; j < this.height; j++) {\r\n        let x = i + this.focus.x - this.halfWidth;\r\n        let y = j + this.focus.y - this.halfHeight;\n        this.cells[i][j] = this.grid.getTile(x, y);\n      }\r\n    }\r\n    this.cells[Math.floor(this.width / 2)][Math.floor(this.height / 2)] = new Tile(PLAYER);\r\n  }\r\n\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Viewport.js","const TILEMAP = {\n  '0': {x: 32, y: 304},\n  '1': {x: 16, y: 16},\n  '2': {x: 48, y: 16},\n  'P': {x: 7 * 16, y: 16}\n};\n\nexport default class RenderEngine {\n  constructor(canvas, sprite, grid, player) {\n    // canvas is 960 x 640\n    this.canvas = canvas;\n    this.ctx = canvas.getContext('2d');\n    this.sprite = sprite;\n    this.grid = grid;\n    this.player = player;\n    this.viewport = player.viewport;\n  }\n\n  render() {\n    for (let i = 0; i < this.viewport.width; i++) {\n      for (let j = 0; j < this.viewport.height; j++) {\n        this.drawTile(this.viewport.cells[i][j].symbol, i, j);\n      }\n    }\n  }\n\n  drawTile(tile, x, y) {\n    let spritePos = TILEMAP[tile];\n    let { tileHeight, tileWidth } = this.sprite;\n\n    let canvasTileWidth = this.canvas.width / this.viewport.width;\n    let canvasTileHeight = this.canvas.height / this.viewport.height;\n    let canvasPosx = x * canvasTileWidth;\n    let canvasPosy = y * canvasTileHeight;\n    this.ctx.drawImage(\n      this.sprite.image,\n      spritePos.x, spritePos.y,\n      tileWidth, tileHeight,\n      canvasPosx, canvasPosy,\n      canvasTileWidth, canvasTileHeight\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/RenderEngine.js","export default class Sprite {\r\n  constructor(src, onload) {\r\n    this.image = new Image();\r\n    this.image.src = src;\r\n    this.image.onload = onload\r\n    this.tileWidth = 16;\r\n    this.tileHeight = 16;\r\n    this.width = this.image.clientWidth / this.tileWidth;\r\n    this.height = this.image.clientHeight / this.tileHeight;\r\n  }\r\n\r\n  getTile(x, y) {\r\n    return {x: x * this.width, y: y * this.height};\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Sprite.js"],"sourceRoot":""}